<!doctype html>

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0">
        <meta name="description" content="Pàgina web per a crear una aplicació Ionic pas a pas">
        <meta name="keywords" content="Ionic App pas a pas">        
        <meta name="author" content="GACS">
        
        <title>Ionic - Exercici 5</title>
    </head>

    <body>
        <ul style="list-style: none; padding: 0; margin: 0 15vw; padding: 1vh 0; z-index: 100;">
            <li style="visibility: hidden; float: left; margin: 0 0.15em;"><a href="#container" title="Anar al contingut" style="height: 2em; line-height: 2; float: left; width: 9em; display: block; text-decoration:none; text-align: none;">Anar al contingut</a></li>
            <li style="float: left; margin: 0 0.15em; background-color: yellow; padding: 0.5vh 1vw; color: red; font-weight: bold;">Català</li>
            <li style="float: left; margin: 0 0.15em; padding: 0.5vh 1vw; "><a href="../es/ex05.html" title="Ver el ejercicio en castellano" style="text-decoration: none; color: black;">Castellano</a></li>
            <li style="float: left; margin: 0 0.15em; padding: 0.5vh 1vw;"><a href="../en/ex05.html" title="Read the  exercise in english" style="text-decoration: none; color: black;">English</a></li>
        </ul>

        <article style="background-color: #fae6fa;; width: 70vw; margin: 0 15vw; font-size: 1.5em;" name="container;">
            <section style="margin: 0 2vw; padding-bottom: 1vh;">
                <h1 style="padding: 1vh 0;">Exercici 5</h1>
                <p>
                    L’aplicació comença a tenir bona cara i funciona, però tot i que la imatge és accessible als lectors de pantalla, un usuari del lector de pantalla haurà de realitzar un flick per a saber si ha 
                    calculat bé o malament el valor, amb la qual cosa estaria bé llançar un so per a donar una resposta ràpida a aquests usuaris.
                </p>
                <div>
                    <h2>Descricpció de l'aplicació</h2>
                    <p>
                        Si descarregueu l’aplicació del <a href="" title="Anar al repositori per descarregar l'exercici" target="_blank" style="text-decoration: none;">repositori de bcnitb</a> 
                        i l’executem, veurem que quan encertem la suma dels dos nombres es llança el so de gent aplaudint. D’aquesta forma donem una informació sonora als usuaris de lector de pantalla i puguin saber 
                        si han calculat bé l’operació o no.
                    </p>
                </div>
                <div>
                    <h2>Conceptes</h2>
                    <p>
                        Per que es reprodueixi un so a la nostre aplicació hem d’utilitzar una funció de <b>TypeScript</b> anomenada <b lang="en-EN">Audio( )</b>. Per tant, si obrim el fitxer <b>home.page.ts</b> 
                        veurem que tenim una sèrie de variables noves que no estaven. Aquestes variables son:
                    </p>
                    <div style="width: 100%; background-color: #000;">
                        <code style="font-size: 1.5em; color: white;">
                            <li style="list-style: none;">
                                <ul>sound:any;</ul>
                                <ul>audio=new Audio( );</ul>
                                <ul>audioTime:any;</ul>
                            </li>
                        </code>
                    </div>
                    <p>
                        La primera variable, <b lang="en-EN">sound</b>, és on es guardarà el so que llançarem al donar al botó per enviar la nostre resposta. La segona variable, <b lang="en-EN">audio</b>, 
                        emmagatzema la funció <b lang="en-EN">Audio( )</b>, que serà l’encarregada de reproduir el so. Per últim, la variable <b>audioTime</b> s’encarrega de posar el temps de duració del so a zero 
                        per pausar-ho.
                    </p>
                    <p>
                        Si ens desplacem al final del codi observarem la nova funció <b lang="en-EN">play( )</b> que és encarregada de carregar el so a la funció <b lang="en-EN">Audio( )</b> i fer que es 
                        reprodueixi. Però abans de tot el que fa la funció és cridar a la funció <b>pauseAudio( )</b> per aturar qualsevol audio que s’estigui reproduint. Això es fa per evitar un solape dels sons.
                    </p>
                    <p>
                        La funció play( ) té la següent forma:
                    </p>
                    <div style="width: 100%; background-color: #000;">
                        <code style="font-size: 1.5em; color: white;">
                            <p style="padding:0 3vw;">play(sound:any) {</p>
                                <p style="padding:0 5vw;">this.pauseAudio(sound);</p>
                            
                                <p style="padding:0 5vw;">this.audio.src=sound;</p>
                                <p style="padding:0 5vw;">this.audio.load();</p>
                                <p style="padding:0 5vw;">this.audio.play();</p>
                            
                                <p style="padding:0 5vw;">this.audioTime=setTimeout(() =>{</p>
                                    <p style="padding:0 7vw;">sound.playing=false;</p>
                                    <p style="padding:0 5vw;">}, sound.duration*1000);</p>
                                    <p style="padding:0 3vw;">}</p>
                        </code>
                    </div>
                    <p>
                        Pel que fa a la funció <b>pauseAudio( )</b>, es de la següent forma:
                    </p>
                    <div style="width: 100%; background-color: #000;">
                        <code style="font-size: 1.5em; color: white;">
                            <p style="padding:0 3vw;">private pauseAudio(selectedSound: any){</p>
                                <p style="padding:0 5vw;">clearTimeout(this.audioTime);</p>
                            
                                <p style="padding:0 5vw;">this.audio.pause();</p>
                            <p style="padding:0 3vw;">}</p>
                        </code>
                    </div>
                    <p>
                        Com podem observar, les funcions son força senzilles.
                    </p>
                </div>
                <div>
                    <h2>Exercici</h2>
                    <p>
                        En aquest exercici es demana que quan el valor introduït sigui erroni es llanci l’efecte sonor <b>fail.mp3</b> per dona una sortida sonora als usuaris de lectors de pantalla.
                    </p>
                    <p>
                        Els efectes sonors s’han descarregat de la web: <a title="Anara a la web d'efectes sonors" target="_blank">http://www.sonidosmp3gratis.com/efectos</a>, si es volen utilitzar uns altres 
                        efectes sonors ho podeu fer.
                    </p>
                </div>
            </section>
        </article>

        <div style="width: 65vw; margin: auto;">
            <a href="ex04.html" style="text-decoration: none; background-color: blue; color: white; padding: 1vh 2vw; float: left; margin: 2vh 0;" title="Anar a l'exercici anterior">
                Anterior
            </a>
        

        
            <a href="ex06.html" style="text-decoration: none; background-color: blue; color: white; padding: 1vh 2vw; float: right; margin: 2vh 0;" title="Anar a l'exercici següent">
                Següent
            </a>
        </div>
    </body>
</html>
